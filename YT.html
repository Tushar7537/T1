<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Analytics Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --dark-bg: #1a2980;
            --medium-bg: #26d0ce;
            --text-color: #ffffff;
            --accent-color: #00ffcc;
            --revenue-color: #ff4d4d;
            --gradient-start: #ff7e5f;
            --gradient-end: #feb47b;
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-border: rgba(255, 255, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--medium-bg) 100%);
            color: var(--text-color);
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Banner Section */
        .banner {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            padding: 50px 0;
            text-align: center;
            margin: 20px 0 40px;
            border-radius: 15px;
        }

        .banner h1 {
            font-size: 36px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .banner p {
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }

        .search-container {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 8px 0 0 8px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
        }

        .search-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .search-btn:hover {
            background-color: #3e8e41;
        }

        /* Analytics Section */
        .analytics-section {
            margin: 40px 0;
        }

        .section-title {
            font-size: 24px;
            margin-bottom: 25px;
            color: var(--accent-color);
            font-weight: 600;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .analytics-card {
            background-color: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
            border-radius: 10px;
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .analytics-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 255, 204, 0.2);
        }

        .card-title {
            font-size: 14px;
            color: var(--accent-color);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-value {
            font-size: 20px;
            font-weight: 600;
        }

        .revenue-card {
            background-color: var(--revenue-color);
            color: white;
            grid-column: 1 / -1;
            text-align: center;
            padding: 30px;
        }

        .revenue-value {
            font-size: 36px;
            font-weight: 700;
            margin: 10px 0;
        }

        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .chart-container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--accent-color);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            color: var(--revenue-color);
            text-align: center;
            padding: 20px;
            display: none;
            background: rgba(255, 77, 77, 0.1);
            border-radius: 8px;
            margin: 20px 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .search-container {
                flex-direction: column;
            }

            .search-input {
                border-radius: 8px;
                margin-bottom: 10px;
            }

            .search-btn {
                border-radius: 8px;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .banner {
                padding: 30px 0;
            }
            
            .banner h1 {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Banner Section -->
        <section class="banner">
            <h1>YouTube Analytics</h1>
            <p>Get detailed insights into any YouTube channel</p>
            <div class="search-container">
                <input type="text" class="search-input" id="channelInput" placeholder="Enter YouTube channel name or URL">
                <button class="search-btn" id="searchBtn">See Analytics</button>
            </div>
        </section>

        <!-- Loading Spinner -->
        <div class="spinner" id="spinner"></div>

        <!-- Error Message -->
        <div class="error-message" id="errorMessage"></div>

        <!-- Analytics Section -->
        <section class="analytics-section" id="analyticsSection" style="display: none;">
            <h2 class="section-title">Channel Analytics</h2>
            <div class="analytics-grid" id="analyticsGrid">
                <!-- Analytics cards will be inserted here by JavaScript -->
            </div>

            <!-- Revenue Card -->
            <div class="analytics-card revenue-card">
                <div class="card-title">ESTIMATED TOTAL REVENUE</div>
                <div class="revenue-value" id="revenueValue">$0.00</div>
                <div>Based on channel views and country-specific RPM rates</div>
            </div>

            <!-- Charts Section -->
            <h2 class="section-title" style="margin-top: 40px;">Data Visualization</h2>
            <div class="charts-grid">
                <div class="chart-container">
                    <canvas id="subscriberChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="uploadsChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="viewsChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="revenueChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="engagementChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="demographicsChart"></canvas>
                </div>
            </div>
        </section>
    </div>

    <script>
        // API Key
        const API_KEY = 'AIzaSyB0UysNkk35gH3ijJCgh-89ETk-30wBMZ0';

        // RPM rates by country
        const rpmRates = {
            'US': 7.53,    // United States
            'GB': 5.62,    // United Kingdom
            'NZ': 5.56,    // New Zealand
            'AE': 2.33,    // United Arab Emirates
            'PK': 2.5,     // Pakistan
            'IN': 2.5      // India
        };

        // DOM Elements
        const channelInput = document.getElementById('channelInput');
        const searchBtn = document.getElementById('searchBtn');
        const spinner = document.getElementById('spinner');
        const errorMessage = document.getElementById('errorMessage');
        const analyticsSection = document.getElementById('analyticsSection');
        const analyticsGrid = document.getElementById('analyticsGrid');
        const revenueValue = document.getElementById('revenueValue');

        // Chart instances
        let subscriberChart, uploadsChart, viewsChart, revenueChart, engagementChart, demographicsChart;

        // Event Listeners
        searchBtn.addEventListener('click', searchChannel);
        channelInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchChannel();
        });

        // Search for a YouTube channel
        async function searchChannel() {
            const query = channelInput.value.trim();
            if (!query) {
                showError('Please enter a YouTube channel name or URL');
                return;
            }

            showLoading();
            hideError();
            hideAnalytics();

            try {
                // First, search for the channel
                const searchResponse = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=channel&key=${API_KEY}`);
                const searchData = await searchResponse.json();

                if (!searchData.items || searchData.items.length === 0) {
                    throw new Error('No channel found with that name');
                }

                // Get the first channel result
                const channelId = searchData.items[0].id.channelId;
                
                // Get channel details
                const channelResponse = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics,status,brandingSettings&id=${channelId}&key=${API_KEY}`);
                const channelData = await channelResponse.json();

                if (!channelData.items || channelData.items.length === 0) {
                    throw new Error('Could not retrieve channel details');
                }

                // Display the analytics
                displayAnalytics(channelData.items[0]);
                
            } catch (error) {
                showError(error.message || 'An error occurred while fetching channel data');
            } finally {
                hideLoading();
            }
        }

        // Display channel analytics
        function displayAnalytics(channel) {
            const snippet = channel.snippet;
            const statistics = channel.statistics;
            const status = channel.status;
            const brandingSettings = channel.brandingSettings || {};
            
            // Extract channel data
            const channelData = {
                id: channel.id,
                title: snippet.title,
                description: snippet.description || 'N/A',
                customUrl: snippet.customUrl || 'N/A',
                subscriberCount: statistics.hiddenSubscriberCount ? 'Hidden' : parseInt(statistics.subscriberCount).toLocaleString(),
                videoCount: parseInt(statistics.videoCount).toLocaleString(),
                viewCount: parseInt(statistics.viewCount).toLocaleString(),
                publishedAt: new Date(snippet.publishedAt).toLocaleDateString(),
                thumbnails: snippet.thumbnails,
                country: snippet.country || 'N/A',
                isLinked: status.isLinked,
                keywords: brandingSettings.channel?.keywords || 'N/A',
                unsubscribedTrailer: brandingSettings.channel?.unsubscribedTrailer || 'N/A'
            };

            // Create analytics cards
            analyticsGrid.innerHTML = `
                <div class="analytics-card">
                    <div class="card-title">CHANNEL ID</div>
                    <div class="card-value">${channelData.id}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">CHANNEL TITLE</div>
                    <div class="card-value">${channelData.title}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">DESCRIPTION</div>
                    <div class="card-value">${truncateText(channelData.description, 100)}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">CUSTOM URL</div>
                    <div class="card-value">${channelData.customUrl}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">SUBSCRIBERS</div>
                    <div class="card-value">${channelData.subscriberCount}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">VIDEO COUNT</div>
                    <div class="card-value">${channelData.videoCount}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">TOTAL VIEWS</div>
                    <div class="card-value">${channelData.viewCount}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">CREATION DATE</div>
                    <div class="card-value">${channelData.publishedAt}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">COUNTRY</div>
                    <div class="card-value">${channelData.country}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">VERIFICATION STATUS</div>
                    <div class="card-value">${channelData.isLinked ? 'Verified' : 'Not Verified'}</div>
                </div>
                <div class="analytics-card">
                    <div class="card-title">KEYWORDS</div>
                    <div class="card-value">${truncateText(channelData.keywords, 100)}</div>
                </div>
            `;

            // Calculate and display revenue
            calculateRevenue(channelData.country, channelData.viewCount);

            // Initialize charts
            initCharts();

            // Show analytics section
            showAnalytics();
        }

        // Calculate estimated revenue
        function calculateRevenue(countryCode, viewCount) {
            // Clean view count (remove commas)
            const cleanViewCount = parseInt(viewCount.replace(/,/g, ''));
            
            // Get RPM rate based on country
            const rpm = rpmRates[countryCode] || 2.0; // Default RPM if country not found
            
            // Calculate revenue (RPM is revenue per 1000 views)
            const revenue = (cleanViewCount * rpm) / 1000;
            
            // Format and display revenue
            revenueValue.textContent = `$${revenue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
        }

        // Initialize charts with sample data
        function initCharts() {
            // Subscriber Growth Chart (Line)
            const subscriberCtx = document.getElementById('subscriberChart').getContext('2d');
            subscriberChart = new Chart(subscriberCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Subscribers',
                        data: [5000, 8000, 12000, 15000, 20000, 25000],
                        borderColor: '#00ffcc',
                        tension: 0.3,
                        fill: true,
                        backgroundColor: 'rgba(0, 255, 204, 0.1)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Subscriber Growth'
                        }
                    }
                }
            });

            // Video Uploads Chart (Bar)
            const uploadsCtx = document.getElementById('uploadsChart').getContext('2d');
            uploadsChart = new Chart(uploadsCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Uploads',
                        data: [12, 19, 15, 17, 14, 16],
                        backgroundColor: '#ff7e5f'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Video Uploads'
                        }
                    }
                }
            });

            // Views Over Time Chart (Pie)
            const viewsCtx = document.getElementById('viewsChart').getContext('2d');
            viewsChart = new Chart(viewsCtx, {
                type: 'pie',
                data: {
                    labels: ['Gaming', 'Tech', 'Vlogs', 'Education', 'Entertainment'],
                    datasets: [{
                        data: [30, 25, 20, 15, 10],
                        backgroundColor: [
                            '#ff7e5f', '#feb47b', '#00ffcc', '#2d2d4d', '#ff4d4d'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Views by Category'
                        }
                    }
                }
            });

            // Revenue Trends Chart (Doughnut)
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            revenueChart = new Chart(revenueCtx, {
                type: 'doughnut',
                data: {
                    labels: ['AdSense', 'Sponsorships', 'Merch', 'Memberships'],
                    datasets: [{
                        data: [65, 20, 10, 5],
                        backgroundColor: [
                            '#ff7e5f', '#feb47b', '#00ffcc', '#2d2d4d'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Revenue Sources'
                        }
                    }
                }
            });

            // Engagement Metrics Chart (Radar)
            const engagementCtx = document.getElementById('engagementChart').getContext('2d');
            engagementChart = new Chart(engagementCtx, {
                type: 'radar',
                data: {
                    labels: ['Likes', 'Comments', 'Shares', 'Watch Time', 'Click-through'],
                    datasets: [{
                        label: 'Engagement Rate',
                        data: [85, 70, 60, 90, 75],
                        backgroundColor: 'rgba(0, 255, 204, 0.2)',
                        borderColor: '#00ffcc'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Engagement Metrics'
                        }
                    }
                }
            });

            // Audience Demographics Chart (Polar Area)
            const demographicsCtx = document.getElementById('demographicsChart').getContext('2d');
            demographicsChart = new Chart(demographicsCtx, {
                type: 'polarArea',
                data: {
                    labels: ['18-24', '25-34', '35-44', '45-54', '55+'],
                    datasets: [{
                        data: [30, 25, 20, 15, 10],
                        backgroundColor: [
                            '#ff7e5f', '#feb47b', '#00ffcc', '#2d2d4d', '#ff4d4d'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Audience Age Demographics'
                        }
                    }
                }
            });
        }

        // Utility functions
        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substring(0, maxLength) + '...';
        }

        function showLoading() {
            spinner.style.display = 'block';
        }

        function hideLoading() {
            spinner.style.display = 'none';
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
        }

        function hideError() {
            errorMessage.style.display = 'none';
        }

        function showAnalytics() {
            analyticsSection.style.display = 'block';
        }

        function hideAnalytics() {
            analyticsSection.style.display = 'none';
        }
    </script>
</body>
</html>
